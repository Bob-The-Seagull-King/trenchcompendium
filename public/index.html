<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
        <meta name="theme-color" content="#2a2a2a" />

        <link rel="icon" href="%PUBLIC_URL%/favicon/favicon.ico" />
        <link rel="icon" type="image/png" href="%PUBLIC_URL%/favicon/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="%PUBLIC_URL%/favicon/favicon-16x16.png" sizes="16x16" />
        <link rel="apple-touch-icon" href="%PUBLIC_URL%/favicon/apple-touch-icon.png" />

        <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />

         <link href="/static/css/main.c02abf55.css" rel="stylesheet">
         <title>Trench Companion | The officially supported Trench Crusade ressource</title>
         <meta name="description" content="The official resource for Trench Crusade" data-react-helmet="true">
         <meta property="og:description" content="The official resource for Trench Crusade" data-react-helmet="true">
         <meta property="og:title" content="Trench Companion | Trench Companion" data-react-helmet="true">
         <meta property="og:type" content="website" data-react-helmet="true">

        <!-- 1) Funding Choices (Google CMP) -->
        <script>
            (function() {
                function signalGooglefcPresent() {
                    if (!window.frames['googlefcPresent']) {
                        if (document.body) {
                            const iframe = document.createElement('iframe');
                            iframe.style.cssText = 'width:0;height:0;border:none;z-index:-1;left:-9999px;position:absolute;';
                            iframe.name = 'googlefcPresent';
                            document.body.appendChild(iframe);
                        } else {
                            setTimeout(signalGooglefcPresent, 5);
                        }
                    }
                }
                signalGooglefcPresent();
            })();
        </script>
        <script async src="https://fundingchoicesmessages.google.com/i/pub-3744837400491966?ers=1"></script>
        <script>
            (function() {
                function handleM(e) {
                    if ((e.source === window || e.source === window.top) && e.data && e.data.type === 'fundingchoices') {
                        if (e.data.action === 'consent-status') {
                            // FC wird Consent intern updaten; wir müssen hier nichts weiter tun
                        }
                    }
                }
                window.addEventListener('message', handleM);
            })();
        </script>

        <!-- 2) Consent Mode v2 Default (denied) + dataLayer/gtag Bootstrap -->
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){ dataLayer.push(arguments); }

            gtag('consent', 'default', {
                'ad_storage': 'denied',
                'analytics_storage': 'denied',
                'functionality_storage': 'granted',
                'security_storage': 'granted',
                'ad_user_data': 'denied',
                'ad_personalization': 'denied',
                'wait_for_update': 500
            });
            gtag('set', 'ads_data_redaction', true);
            gtag('set', 'url_passthrough', true);
        </script>

        <!-- 3) AdSense Auto Ads (einmalig) -->
        <script
                id="adsbygoogle-js"
                async
                src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3744837400491966"
                crossorigin="anonymous"
                onload="window.adsenseScriptLoaded=true;window.dispatchEvent(new CustomEvent('adsense:loaded'));"
                onerror="window.adsenseScriptLoaded=false;window.dispatchEvent(new CustomEvent('adsense:error'));"
        ></script>
        <script>
            // Sicherheitsnetz – falls früher zugegriffen wird:
            window.adsbygoogle = window.adsbygoogle || [];
        </script>

        <!-- 4) Google Tag Manager (GTM-NFVT7W7X) – nach Consent-Default -->
        <script>
            (function(w,d,s,l,i){
                w[l]=w[l]||[]; w[l].push({'gtm.start': new Date().getTime(), event:'gtm.js'});
                var f=d.getElementsByTagName(s)[0], j=d.createElement(s), dl=l!='dataLayer'?'&l='+l:'';
                j.async=true; j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl; f.parentNode.insertBefore(j,f);
            })(window,document,'script','dataLayer','GTM-NFVT7W7X');
        </script>



    </head>

    <body class="trench-companion">
        <!-- GTM Fallback -->
        <noscript>
            <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NFVT7W7X"
                    height="0" width="0" style="display:none;visibility:hidden"></iframe>
        </noscript>

        </noscript>
         <noscript>You need to enable JavaScript to run this app.</noscript>
         <style>#global-loader{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:#2a2a2a;z-index:9999}.spinner{width:48px;height:48px;border:4px solid rgba(135,18,20,.5);border-top:4px solid #d01317;border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}</style>
         <style>
            #global-loader {
                position: fixed;
                inset: 0;
                display: flex;
                align-items: center;
                justify-content: center;
                background: #2a2a2a;
                z-index: 9999;
            }

            .spinner {
                width: 48px;
                height: 48px;
                border: 4px solid rgba(135,18,20,0.5);
                border-top: 4px solid #d01317;
                border-radius: 50%;
                animation: spin 1s linear infinite;
            }

            @keyframes spin {
                to {
                    transform: rotate(360deg);
                }
            }
         </style>
         <div id="global-loader">
            <div class="spinner"></div>
         </div>

         <div id="root"></div>
    </body>
</html>

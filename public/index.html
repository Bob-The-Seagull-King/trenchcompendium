<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
        <meta name="theme-color" content="#2a2a2a" />

        <link rel="icon" href="%PUBLIC_URL%/favicon/favicon.ico" />
        <link rel="icon" type="image/png" href="%PUBLIC_URL%/favicon/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="%PUBLIC_URL%/favicon/favicon-16x16.png" sizes="16x16" />
        <link rel="apple-touch-icon" href="%PUBLIC_URL%/favicon/apple-touch-icon.png" />

        <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />

         <link href="/static/css/main.c02abf55.css" rel="stylesheet">
         <title>Trench Companion | The officially supported Trench Crusade resource</title>
         <meta name="description" content="The official resource for Trench Crusade" data-react-helmet="true">
         <meta property="og:description" content="The official resource for Trench Crusade" data-react-helmet="true">
         <meta property="og:title" content="Trench Companion | Trench Companion" data-react-helmet="true">
         <meta property="og:type" content="website" data-react-helmet="true">

        <!-- 1) Referrer-Policy, so FC sees Origin -->
        <meta name="referrer" content="strict-origin-when-cross-origin" />


        <!-- 2) (Optional) Temp CSS-Bumper for potential globale iframe-hiding -->
<!--        <style>-->
<!--            iframe[src*="fundingchoicesmessages.google.com"]{-->
<!--                display:block!important;visibility:visible!important;opacity:1!important;-->
<!--            }-->
<!--        </style>-->

        <!-- Data Layer + Consent-Defaults + TCF -->
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){ dataLayer.push(arguments); }

            // bis zur Entscheidung: alles denied
            gtag('consent','default',{
                ad_storage:'denied',
                analytics_storage:'denied',
                ad_user_data:'denied',
                ad_personalization:'denied',
                wait_for_update:500
            });

            // Activate TCF-Bridge  (Google reads TCF-Strings)
            window.gtag_enable_tcf_support = true;
        </script>

        <!--  FC-Callbacks: Consent-Mode-Values -> gtag('consent','update'), later load GTM -->
        <script>
            (function(){
                var gtmLoaded = false;

                function loadGTM(){
                    if (gtmLoaded) return; gtmLoaded = true;
                    // *** Official GTM-BOOTSTRAP-SNIPPET ***
                    (function(w,d,s,l,i){
                        w[l]=w[l]||[];
                        w[l].push({'gtm.start': new Date().getTime(), event:'gtm.js'});
                        var f=d.getElementsByTagName(s)[0],
                            j=d.createElement(s),
                            dl=l!='dataLayer'?'&l='+l:'';
                        j.async=true;
                        j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
                        f.parentNode.insertBefore(j,f);
                    })(window,document,'script','dataLayer','GTM-NFVT7W7X');
                }

                function mapConsentValues(status) {
                    try {
                        var E = googlefc.ConsentModePurposeStatusEnum;
                        var m = function(v){ return v===E.CONSENT_MODE_PURPOSE_STATUS_GRANTED ? 'granted' : 'denied'; };
                        gtag('consent','update', {
                            ad_storage:         m(status.adStoragePurposeConsentStatus),
                            analytics_storage:  m(status.analyticsStoragePurposeConsentStatus),
                            ad_user_data:       m(status.adUserDataPurposeConsentStatus),
                            ad_personalization: m(status.adPersonalizationPurposeConsentStatus)
                        });
                    } catch(e) {/* bleibt auf defaults */}
                }

                window.googlefc = window.googlefc || {};
                googlefc.callbackQueue = googlefc.callbackQueue || [];

                // Debug-Logs (optional)
                googlefc.callbackQueue.push({
                    CONSENT_API_READY:        function(){ console.log('[FC] CONSENT_API_READY'); },
                    CONSENT_DATA_READY:       function(){ console.log('[FC] CONSENT_DATA_READY'); },
                    CONSENT_MODE_DATA_READY:  function(){
                        console.log('[FC] CONSENT_MODE_DATA_READY',
                            (googlefc.getGoogleConsentModeValues && googlefc.getGoogleConsentModeValues()) || '(no values)');
                        var vals = googlefc.getGoogleConsentModeValues && googlefc.getGoogleConsentModeValues();
                        if (vals) mapConsentValues(vals);
                        loadGTM();
                    }
                });

                // Fallback: if FC-Callback does not fire â†’ Load GTM anyways (denied-konform)
                setTimeout(loadGTM, 1500);
            })();
        </script>

        <!-- Optional: googlefcPresent Iframe -->
<!--        <script>-->
<!--            (function signalGooglefcPresent() {-->
<!--                if (!window.frames['googlefcPresent']) {-->
<!--                    if (document.body) {-->
<!--                        var iframe = document.createElement('iframe');-->
<!--                        iframe.style = 'width:0;height:0;border:none;z-index:-1000;left:-1000px;top:-1000px;display:none;';-->
<!--                        iframe.name  = 'googlefcPresent';-->
<!--                        document.body.appendChild(iframe);-->
<!--                    } else {-->
<!--                        setTimeout(signalGooglefcPresent, 0);-->
<!--                    }-->
<!--                }-->
<!--            })();-->
<!--        </script>-->

        <!-- Funding Choices (Google CMP) -->
        <script async src="https://fundingchoicesmessages.google.com/i/pub-3744837400491966?ers=1"></script>

        <!-- AdSense Auto-Ads injected by adsmanager -->
<!--        <script async-->
<!--                src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3744837400491966"-->
<!--                crossorigin="anonymous"-->
<!--                onload="window.adsenseScriptLoaded=true; window.dispatchEvent(new Event('adsense:loaded'))">-->
<!--        </script>-->

    </head>

    <body class="trench-companion">
        <!-- GTM Fallback -->
        <noscript>
            <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NFVT7W7X"
                    height="0" width="0" style="display:none;visibility:hidden"></iframe>
        </noscript>

         <noscript>You need to enable JavaScript to run this app.</noscript>


         <div id="root"></div>
    </body>
</html>
